<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Línea de tiempo — Programas UNICIENCIA</title>
<style>
  :root{
    --bg:#0f1724;
    --accent:#6EE7B7;
    --muted:#9aa6b2;
    --glass: rgba(255,255,255,0.03);
  }
  body{
    margin:0;padding:28px;
    background:linear-gradient(180deg,#071126 0%,#021826 100%);
    color:#e6eef6;
    font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto;
  }
  .container{
    max-width:1200px;margin:0 auto;
    background:var(--glass);
    border-radius:14px;padding:22px;
    box-shadow:0 10px 30px rgba(0,0,0,0.6);
    border:1px solid rgba(255,255,255,0.03);
  }
  header{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px;margin-bottom:18px}
  h1{margin:0;font-size:22px}
  p.lead{margin:4px 0 0;color:var(--muted);font-size:14px}
  .filters{display:flex;gap:12px;flex-wrap:wrap}
  .filters label{display:block;color:#fff;font-weight:600;font-size:13px;margin-bottom:4px}
  .filters select,.filters button{
    background:var(--glass);border:1px solid rgba(255,255,255,0.06);
    color:#fff;padding:8px 10px;border-radius:8px;font-size:13px;
  }
  .filters button{cursor:pointer;background:linear-gradient(90deg,#7c3aed,#06b6d4);border:none}
  .timeline-wrapper{display:flex;gap:20px;margin-top:18px}
  .svg-wrap{flex:1;background:var(--glass);border-radius:12px;padding:20px;border:1px solid rgba(255,255,255,0.02)}
  svg{width:100%;height:420px;overflow:visible}
  .legend{width:260px;background:var(--glass);border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.02);font-size:13px}
  .legend h3{margin-top:0;color:#fff;font-size:15px}
  .legend .item{display:flex;align-items:center;gap:10px;margin-bottom:8px}
  .dot{width:14px;height:14px;border-radius:4px;flex:0 0 14px}
  .tooltip{
    position:fixed;pointer-events:none;
    background:rgba(255,255,255,0.04);color:#eaf6ff;
    border-radius:8px;padding:10px;font-size:13px;
    border:1px solid rgba(255,255,255,0.06);
    box-shadow:0 10px 30px rgba(0,0,0,0.6);
    white-space:nowrap;display:none;z-index:1000;
  }
  .pulse{animation:pulse 1.6s infinite}
  @keyframes pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(1.9);opacity:0}100%{transform:scale(1.9);opacity:0}}
  @media (max-width:980px){.timeline-wrapper{flex-direction:column}.legend{width:100%}svg{height:520px}}
  footer{margin-top:16px;color:var(--muted);font-size:13px;display:flex;justify-content:space-between;align-items:center}
</style>
</head>
<body>
<div class="container">
  <header>
    <div>
      <h1>Línea de tiempo de Programas Académicos</h1>
      <p class="lead">Resoluciones de aprobación por Campus, Nivel y Programa — UNICIENCIA</p>
    </div>
    <div class="filters">
      <div>
        <label for="campusFilter">Filtrar por Campus</label>
        <select id="campusFilter"><option value="All">Todos</option></select>
      </div>
      <div>
        <label for="levelFilter">Filtrar por Nivel</label>
        <select id="levelFilter"><option value="All">Todos</option></select>
      </div>
      <div>
        <label for="programFilter">Filtrar por Programa</label>
        <select id="programFilter"><option value="All">Todos</option></select>
      </div>
      <div style="align-self:flex-end">
        <button id="reset">Restablecer filtros</button>
      </div>
    </div>
  </header>

  <div class="timeline-wrapper">
    <div class="svg-wrap">
      <svg id="timelineSVG"></svg>
    </div>

    <aside class="legend">
      <h3>Leyenda de Campus</h3>
      <div id="legendList"></div>
    </aside>
  </div>

  <footer>
    <div>Informe de gestión • UNICIENCIA</div>
    <div>Años mostrados: <span id="minYear"></span> — <span id="maxYear"></span></div>
  </footer>
</div>

<div id="tooltip" class="tooltip"></div>

<script>
const rawData=[ /* mismo arreglo de datos que ya tenías */ 
  {program:"Administración de Empresas", campus:"Bucaramanga", level:"Pregrado", year:2015},
  {program:"Administración de Empresas", campus:"Bogotá", level:"Pregrado", year:2015},
  {program:"Contaduría Pública", campus:"Bogotá", level:"Pregrado", year:2015},
  {program:"Administración de Empresas", campus:"Monteria", level:"Pregrado", year:2015},
  {program:"Ingeniería de Sistemas", campus:"Bucaramanga", level:"Pregrado", year:2016},
  {program:"Diseño de modas", campus:"Bogotá", level:"Pregrado", year:2016},
  {program:"Publicidad", campus:"Bogotá", level:"Pregrado", year:2017},
  {program:"Economía", campus:"Bogotá", level:"Pregrado", year:2018},
  {program:"Ingeniería Industrial", campus:"Bogotá", level:"Pregrado", year:2018},
  {program:"Derecho", campus:"Bogotá", level:"Pregrado", year:2018},
  {program:"Especialización en Derecho Constitucional", campus:"Bucaramanga", level:"Posgrado", year:2019},
  {program:"Ingeniería de Sistemas", campus:"Bogotá", level:"Pregrado", year:2019},
  {program:"Ingeniería Industrial", campus:"Bucaramanga", level:"Pregrado", year:2019},
  {program:"Derecho", campus:"Tunja", level:"Pregrado", year:2019},
  {program:"Derecho", campus:"Bucaramanga", level:"Pregrado", year:2022},
  {program:"Administración de Empresas", campus:"Bucaramanga", level:"Pregrado", year:2022},
  {program:"Administración de Empresas", campus:"Bogotá", level:"Pregrado", year:2022},
  {program:"Contaduría Pública", campus:"Bucaramanga", level:"Pregrado", year:2022},
  {program:"Ingeniería de Sistemas", campus:"Bucaramanga", level:"Pregrado", year:2024},
  {program:"Especialización en Gerencia Tributaria", campus:"Bucaramanga", level:"Posgrado", year:2025},
  {program:"Especialización en Gerencia Tributaria", campus:"Bogotá", level:"Posgrado", year:2025},
  {program:"Publicidad", campus:"Bogotá", level:"Pregrado", year:2025},
  {program:"Especialización en Gerencia del Talento Humano", campus:"Bucaramanga", level:"Posgrado", year:2025},
  {program:"Especialización en Gerencia del Talento Humano", campus:"Bogotá", level:"Posgrado", year:2025},
  {program:"Especialización en Gerencia del Talento Humano", campus:"Tunja", level:"Posgrado", year:2025},
  {program:"Derecho", campus:"Bogotá", level:"Pregrado", year:2025},
  {program:"Derecho", campus:"Bucaramanga", level:"Pregrado", year:2025},
  {program:"Derecho", campus:"Tunja", level:"Pregrado", year:2025}
];
const svg=document.getElementById('timelineSVG'),ns="http://www.w3.org/2000/svg";
const years=rawData.map(d=>d.year),minYear=Math.min(...years),maxYear=Math.max(...years);
document.getElementById('minYear').textContent=minYear;
document.getElementById('maxYear').textContent=maxYear;
function colorForCampus(c){return({Bogotá:"#06b6d4",Bucaramanga:"#7c3aed",Monteria:"#f97316",Tunja:"#ef4444"}[c])||"#60a5fa";}
const padding={left:60,right:30},w=svg.clientWidth||1000,h=420,axisY=h/2;
svg.setAttribute('viewBox',`0 0 ${w} ${h}`);
const xStart=padding.left,xEnd=w-padding.right,span=maxYear-minYear||1;
const xForYear=y=>xStart+((y-minYear)/span)*(xEnd-xStart);
// eje
const axis=document.createElementNS(ns,'line');
axis.setAttribute('x1',xStart);axis.setAttribute('x2',xEnd);
axis.setAttribute('y1',axisY);axis.setAttribute('y2',axisY);
axis.setAttribute('stroke','rgba(255,255,255,0.06)');axis.setAttribute('stroke-width','2');
svg.appendChild(axis);
for(let y=minYear;y<=maxYear;y++){
  const t=document.createElementNS(ns,'line');
  t.setAttribute('x1',xForYear(y));t.setAttribute('x2',xForYear(y));
  t.setAttribute('y1',axisY-6);t.setAttribute('y2',axisY+6);
  t.setAttribute('stroke','rgba(255,255,255,0.1)');
  svg.appendChild(t);
  const lbl=document.createElementNS(ns,'text');
  lbl.setAttribute('x',xForYear(y));lbl.setAttribute('y',axisY+24);
  lbl.setAttribute('text-anchor','middle');
  lbl.setAttribute('font-size','12');
  lbl.setAttribute('fill','#9aa6b2');lbl.textContent=y;
  svg.appendChild(lbl);
}
// puntos
const placed=[];
rawData.forEach((d,i)=>{
  const x=xForYear(d.year);
  const sameYear=placed.filter(p=>p.year===d.year);
  const above=(sameYear.length%2===0);
  const stack=Math.floor(sameYear.length/2);
  const gap=36;
  const y=axisY+(above?-1:1)*(50+stack*gap);
  const g=document.createElementNS(ns,'g');
  g.setAttribute('transform',`translate(${x},${y})`);
  g.dataset.program=d.program;g.dataset.campus=d.campus;g.dataset.level=d.level;
  const line=document.createElementNS(ns,'line');
  line.setAttribute('x1',0);line.setAttribute('x2',0);
  line.setAttribute('y1',above?10:-10);
  line.setAttribute('y2',above?(axisY-y-6):(axisY-y+6));
  line.setAttribute('stroke','rgba(255,255,255,0.1)');
  g.appendChild(line);
  const rect=document.createElementNS(ns,'rect');
  rect.setAttribute('x',-110);rect.setAttribute('y',above?-56:10);
  rect.setAttribute('rx',10);rect.setAttribute('ry',10);
  rect.setAttribute('width',220);rect.setAttribute('height',64);
  rect.setAttribute('fill','rgba(255,255,255,0.03)');
  rect.setAttribute('stroke','rgba(255,255,255,0.06)');
  g.appendChild(rect);
  const stripe=document.createElementNS(ns,'rect');
  stripe.setAttribute('x',-110);stripe.setAttribute('y',above?-56:10);
  stripe.setAttribute('width',10);stripe.setAttribute('height',64);
  stripe.setAttribute('rx',10);stripe.setAttribute('ry',10);
  stripe.setAttribute('fill',colorForCampus(d.campus));
  g.appendChild(stripe);
  const prog=document.createElementNS(ns,'text');
  prog.setAttribute('x',-90);prog.setAttribute('y',(above?-56:10)+22);
  prog.setAttribute('fill','#fff');prog.setAttribute('font-size','13');prog.setAttribute('font-weight','600');
  prog.textContent=d.program;g.appendChild(prog);
  const meta=document.createElementNS(ns,'text');
  meta.setAttribute('x',-90);meta.setAttribute('y',(above?-56:10)+44);
  meta.setAttribute('fill','#a9b6c2');meta.setAttribute('font-size','12');
  meta.textContent=`${d.campus} • ${d.level} • Resolución ${d.year}`;
  g.appendChild(meta);
  const c=document.createElementNS(ns,'circle');
  c.setAttribute('r',8);c.setAttribute('fill',colorForCampus(d.campus));
  c.setAttribute('stroke','rgba(255,255,255,0.06)');c.setAttribute('stroke-width','1.5');
  g.appendChild(c);
  const pulse=document.createElementNS(ns,'circle');
  pulse.setAttribute('r',12);pulse.setAttribute('fill',colorForCampus(d.campus));
  pulse.setAttribute('opacity','0.12');pulse.setAttribute('class','pulse');
  g.appendChild(pulse);
  svg.appendChild(g);
  placed.push({year:d.year,node:g});
});
// leyenda
const legend=document.getElementById('legendList');
[...new Set(rawData.map(d=>d.campus))].forEach(c=>{
  const div=document.createElement('div');div.className='item';
  const dot=document.createElement('div');dot.className='dot';dot.style.background=colorForCampus(c);
  const label=document.createElement('div');label.textContent=c;label.style.color='#fff';label.style.fontWeight='600';
  div.append(dot,label);legend.appendChild(div);
});
// filtros
function fillSelect(sel,arr){
  arr=[...new Set(arr)].sort();
  arr.forEach(v=>{const o=document.createElement('option');o.value=v;o.textContent=v;sel.appendChild(o);});
}
fillSelect(document.getElementById('campusFilter'),rawData.map(d=>d.campus));
fillSelect(document.getElementById('levelFilter'),rawData.map(d=>d.level));
fillSelect(document.getElementById('programFilter'),rawData.map(d=>d.program));
document.getElementById('reset').onclick=()=>{
  campusFilter.value=levelFilter.value=programFilter.value='All';applyFilters();
};
[campusFilter,levelFilter,programFilter].forEach(el=>el.onchange=applyFilters);
function applyFilters(){
  const c=campusFilter.value,l=levelFilter.value,p=programFilter.value;
  svg.querySelectorAll('g').forEach(g=>{
    const ok=(c==='All'||g.dataset.campus===c)&&
             (l==='All'||g.dataset.level===l)&&
             (p==='All'||g.dataset.program===p);
    g.style.opacity= ok? '1':'0'; // ahora totalmente transparente
    g.style.pointerEvents= ok? 'auto':'none';
  });
}
</script>
</body>
</html>

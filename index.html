<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Línea de tiempo — Programas UNICIENCIA</title>
<style>
  :root{
    --blue:#07114f;
    --muted:#555;
    --glass: rgba(0,0,0,0.03);
  }
  html,body{
    margin:0;height:100%;
    background:#ffffff;
    color:#222;
    font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto;
  }
  .container{
    max-width:100%;height:100%;
    margin:0 auto;padding:28px;
    box-sizing:border-box;
  }
  /* Encabezado solo con filtros, centrados */
  header{
    display:flex;
    justify-content:center;
    flex-wrap:wrap;
    gap:16px;
    margin-bottom:18px
  }
  .filters{
    display:flex;
    gap:12px;
    flex-wrap:wrap;
    justify-content:center;
  }
  .filters label{
    display:block;
    color:var(--blue);
    font-weight:600;
    font-size:13px;
    margin-bottom:4px;
  }
  /* Estilo de los select y botón */
  .filters select,.filters button{
    background:var(--glass);
    border:1px solid var(--blue);
    color:var(--blue);
    padding:8px 10px;
    border-radius:8px;
    font-size:13px;
  }
  .filters button{
    cursor:pointer;
    background:var(--blue);
    color:#fff;
    font-weight:600;
  }
  /* Contenedor del SVG con altura reducida */
  .svg-wrap{
    width:100%;
    height:70vh;
    background:var(--glass);
    border-radius:12px;
    border:1px solid rgba(0,0,0,0.05);
    box-sizing:border-box;
    padding:20px;
  }
  svg{width:100%;height:100%;overflow:visible}
  /* Tooltip opcional (no usado actualmente) */
  .tooltip{
    position:fixed;pointer-events:none;
    background:rgba(0,0,0,0.75);
    color:#fff;
    border-radius:8px;padding:10px;font-size:13px;
    border:1px solid rgba(0,0,0,0.2);
    box-shadow:0 10px 30px rgba(0,0,0,0.6);
    white-space:nowrap;display:none;z-index:1000;
  }
  /* Animación de pulso en todos los nodos */
  .pulse{animation:pulse 1.6s infinite}
  @keyframes pulse{
    0%{transform:scale(1);opacity:1}
    70%{transform:scale(1.9);opacity:0}
    100%{transform:scale(1.9);opacity:0}
  }
</style>
</head>
<body>
<div class="container">
  <!-- Filtros centrados -->
  <header>
    <div class="filters">
      <div>
        <label for="campusFilter">Campus</label>
        <select id="campusFilter"><option value="All">Todos</option></select>
      </div>
      <div>
        <label for="levelFilter">Nivel</label>
        <select id="levelFilter"><option value="All">Todos</option></select>
      </div>
      <div>
        <label for="programFilter">Programa</label>
        <select id="programFilter"><option value="All">Todos</option></select>
      </div>
      <div style="align-self:flex-end">
        <button id="reset">Restablecer filtros</button>
      </div>
    </div>
  </header>

  <!-- Contenedor del gráfico -->
  <div class="svg-wrap">
    <svg id="timelineSVG"></svg>
  </div>

  <!-- Pie con años mostrados -->
  <footer style="margin-top:16px;color:var(--muted);font-size:13px;display:flex;justify-content:space-between;align-items:center">
    <div>Informe de gestión • UNICIENCIA</div>
    <div>Años mostrados: <span id="minYear"></span> — <span id="maxYear"></span></div>
  </footer>
</div>

<div id="tooltip" class="tooltip"></div>

<script>
// ------------------------------
// Datos de programas académicos
// ------------------------------
const rawData=[
  {program:"Administración de Empresas", campus:"Bucaramanga", level:"Pregrado", year:2015},
  {program:"Administración de Empresas", campus:"Bogotá", level:"Pregrado", year:2015},
  {program:"Contaduría Pública", campus:"Bogotá", level:"Pregrado", year:2015},
  {program:"Administración de Empresas", campus:"Monteria", level:"Pregrado", year:2015},
  {program:"Ingeniería de Sistemas", campus:"Bucaramanga", level:"Pregrado", year:2016},
  {program:"Diseño de modas", campus:"Bogotá", level:"Pregrado", year:2016},
  {program:"Publicidad", campus:"Bogotá", level:"Pregrado", year:2017},
  {program:"Economía", campus:"Bogotá", level:"Pregrado", year:2018},
  {program:"Ingeniería Industrial", campus:"Bogotá", level:"Pregrado", year:2018},
  {program:"Derecho", campus:"Bogotá", level:"Pregrado", year:2018},
  {program:"Especialización en Derecho Constitucional", campus:"Bucaramanga", level:"Posgrado", year:2019},
  {program:"Ingeniería de Sistemas", campus:"Bogotá", level:"Pregrado", year:2019},
  {program:"Ingeniería Industrial", campus:"Bucaramanga", level:"Pregrado", year:2019},
  {program:"Derecho", campus:"Tunja", level:"Pregrado", year:2019},
  {program:"Derecho", campus:"Bucaramanga", level:"Pregrado", year:2022},
  {program:"Administración de Empresas", campus:"Bucaramanga", level:"Pregrado", year:2022},
  {program:"Administración de Empresas", campus:"Bogotá", level:"Pregrado", year:2022},
  {program:"Contaduría Pública", campus:"Bucaramanga", level:"Pregrado", year:2022},
  {program:"Ingeniería de Sistemas", campus:"Bucaramanga", level:"Pregrado", year:2024},
  {program:"Especialización en Gerencia Tributaria", campus:"Bucaramanga", level:"Posgrado", year:2025},
  {program:"Especialización en Gerencia Tributaria", campus:"Bogotá", level:"Posgrado", year:2025},
  {program:"Publicidad", campus:"Bogotá", level:"Pregrado", year:2025},
  {program:"Especialización en Gerencia del Talento Humano", campus:"Bucaramanga", level:"Posgrado", year:2025},
  {program:"Especialización en Gerencia del Talento Humano", campus:"Bogotá", level:"Posgrado", year:2025},
  {program:"Especialización en Gerencia del Talento Humano", campus:"Tunja", level:"Posgrado", year:2025},
  {program:"Derecho", campus:"Bogotá", level:"Pregrado", year:2025},
  {program:"Derecho", campus:"Bucaramanga", level:"Pregrado", year:2025},
  {program:"Derecho", campus:"Tunja", level:"Pregrado", year:2025}
];

// ------------------------------
// Configuración básica de SVG
// ------------------------------
const svg=document.getElementById('timelineSVG'),
      ns="http://www.w3.org/2000/svg";

// Calcula rango de años
const years=rawData.map(d=>d.year),
      minYear=Math.min(...years),
      maxYear=Math.max(...years);

// Muestra en el pie de página
document.getElementById('minYear').textContent=minYear;
document.getElementById('maxYear').textContent=maxYear;

// Colores por campus
function colorForCampus(c){
  return({
    Bucaramanga:"#007bff", // azul
    Bogotá:"#7c3aed",      // morado
    Tunja:"#f97316",       // naranja
    Monteria:"#facc15"     // amarillo
  }[c])||"#60a5fa";
}

// Márgenes laterales ampliados
const padding={left:180,right:180},
      w=svg.clientWidth||1000,
      h=svg.clientHeight||450,
      axisY=h/2;

// Vista del SVG
svg.setAttribute('viewBox',`0 0 ${w} ${h}`);

// Escala horizontal según año
const xStart=padding.left,
      xEnd=w-padding.right,
      span=maxYear-minYear||1;
const xForYear=y=>xStart+((y-minYear)/span)*(xEnd-xStart);

// ------------------------------
// Dibuja eje horizontal
// ------------------------------
const axis=document.createElementNS(ns,'line');
axis.setAttribute('x1',xStart);axis.setAttribute('x2',xEnd);
axis.setAttribute('y1',axisY);axis.setAttribute('y2',axisY);
axis.setAttribute('stroke','#555');axis.setAttribute('stroke-width','2');
svg.appendChild(axis);

// Marcas y etiquetas de año
for(let y=minYear;y<=maxYear;y++){
  const t=document.createElementNS(ns,'line');
  t.setAttribute('x1',xForYear(y));t.setAttribute('x2',xForYear(y));
  t.setAttribute('y1',axisY-6);t.setAttribute('y2',axisY+6);
  t.setAttribute('stroke','#888');
  svg.appendChild(t);

  const lbl=document.createElementNS(ns,'text');
  lbl.setAttribute('x',xForYear(y));lbl.setAttribute('y',axisY+24);
  lbl.setAttribute('text-anchor','middle');
  lbl.setAttribute('font-size','12');
  lbl.setAttribute('fill','#333');
  lbl.textContent=y;
  svg.appendChild(lbl);
}

// ------------------------------
// Coloca nodos de programas
// ------------------------------
const placed=[]; // para controlar apilamiento en un mismo año
rawData.forEach(d=>{
  const x=xForYear(d.year);
  // Detecta cuántos programas ya tiene este año para alternar arriba/abajo
  const sameYear=placed.filter(p=>p.year===d.year);
  const above=(sameYear.length%2===0);
  const stack=Math.floor(sameYear.length/2);
  const gap=40; // separación vertical
  const y=axisY+(above?-1:1)*(60+stack*gap);

  const g=document.createElementNS(ns,'g');
  g.setAttribute('transform',`translate(${x},${y})`);
  g.dataset.program=d.program;
  g.dataset.campus=d.campus;
  g.dataset.level=d.level;

  // Línea que conecta nodo con el eje
  const line=document.createElementNS(ns,'line');
  line.setAttribute('x1',0);line.setAttribute('x2',0);
  line.setAttribute('y1',above?10:-10);
  line.setAttribute('y2',above?(axisY-y-6):(axisY-y+6));
  line.setAttribute('stroke','#aaa');
  g.appendChild(line);

  // Tarjeta del programa
  const rect=document.createElementNS(ns,'rect');
  rect.setAttribute('x',-110);rect.setAttribute('y',above?-40:10);
  rect.setAttribute('rx',10);rect.setAttribute('ry',10);
  rect.setAttribute('width',220);rect.setAttribute('height',40);
  rect.setAttribute('fill','rgba(0,0,0,0.03)');
  rect.setAttribute('stroke','#bbb');
  g.appendChild(rect);

  // Franja de color del campus
  const stripe=document.createElementNS(ns,'rect');
  stripe.setAttribute('x',-110);stripe.setAttribute('y',above?-40:10);
  stripe.setAttribute('width',10);stripe.setAttribute('height',40);
  stripe.setAttribute('rx',10);stripe.setAttribute('ry',10);
  stripe.setAttribute('fill',colorForCampus(d.campus));
  g.appendChild(stripe);

  // Texto con nombre del programa
  const prog=document.createElementNS(ns,'text');
  prog.setAttribute('x',-90);prog.setAttribute('y',(above?-40:10)+25);
  prog.setAttribute('fill','#000');prog.setAttribute('font-size','13');prog.setAttribute('font-weight','600');
  prog.textContent=d.program;
  g.appendChild(prog);

  // Círculo central
  const c=document.createElementNS(ns,'circle');
  c.setAttribute('r',8);
  c.setAttribute('fill',colorForCampus(d.campus));
  c.setAttribute('stroke','#ccc');
  c.setAttribute('stroke-width','1.5');
  g.appendChild(c);

  // Círculo pulsante (ahora para todos)
  const pulse=document.createElementNS(ns,'circle');
  pulse.setAttribute('r',12);
  pulse.setAttribute('fill',colorForCampus(d.campus));
  pulse.setAttribute('opacity','0.12');
  pulse.setAttribute('class','pulse');
  g.appendChild(pulse);

  svg.appendChild(g);
  placed.push({year:d.year,node:g});
});

// ------------------------------
// Filtros interactivos
// ------------------------------
function fillSelect(sel,arr){
  // Llena cada filtro con valores únicos y ordenados
  arr=[...new Set(arr)].sort();
  arr.forEach(v=>{
    const o=document.createElement('option');
    o.value=v;o.textContent=v;
    sel.appendChild(o);
  });
}
fillSelect(document.getElementById('campusFilter'),rawData.map(d=>d.campus));
fillSelect(document.getElementById('levelFilter'),rawData.map(d=>d.level));
fillSelect(document.getElementById('programFilter'),rawData.map(d=>d.program));

// Botón para restablecer
document.getElementById('reset').onclick=()=>{
  campusFilter.value=levelFilter.value=programFilter.value='All';
  applyFilters();
};

// Aplica filtros al cambiar cualquier select
[campusFilter,levelFilter,programFilter].forEach(el=>el.onchange=applyFilters);

// Función que muestra/oculta nodos según filtros
function applyFilters(){
  const c=campusFilter.value,
        l=levelFilter.value,
        p=programFilter.value;
  svg.querySelectorAll('g').forEach(g=>{
    const ok=(c==='All'||g.dataset.campus===c)&&
             (l==='All'||g.dataset.level===l)&&
             (p==='All'||g.dataset.program===p);
    g.style.opacity= ok? '1':'0'; // oculta visualmente los que no cumplen
    g.style.pointerEvents= ok? 'auto':'none'; // evita interacción en ocultos
  });
}
</script>
</body>
</html>

